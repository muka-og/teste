<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amorzinhos üíñ</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff4d88">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle, #2a0015, #000);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
  color: #fff;
  overflow: hidden;
}

/* üî• SPLASH */
#splash {
  position: fixed;
  inset: 0;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 20;
}

#splash span {
  font-size: 80px;
  animation: pulse 1.2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

.card {
  background: #0f0f0f;
  padding: 28px;
  border-radius: 26px;
  text-align: center;
  box-shadow: 0 0 40px rgba(255,77,136,.6);
  max-width: 320px;
  width: 90%;
  z-index: 2;
}

h1 { color: #ff4d88; }

#contador { margin: 10px 0; }

button {
  margin-top: 15px;
  padding: 14px 26px;
  background: #ff4d88;
  border: none;
  border-radius: 30px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255,77,136,.7);
}

/* ‚ù§Ô∏è CORA√á√ÉO */
#heart {
  font-size: 70px;
  margin: 10px 0;
  transition: transform .1s, filter .1s;
}

/* ‚ú® PART√çCULAS */
.particle {
  position: fixed;
  bottom: -10px;
  font-size: 14px;
  animation: rise 3s linear forwards;
}

@keyframes rise {
  to {
    transform: translateY(-120vh);
    opacity: 0;
  }
}

/* üéâ SURPRESA */
#surpresa {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10;
}

#surpresa .heartBox {
  width: 260px;
  height: 230px;
  background: #ff4d88;
  position: relative;
  transform: rotate(-45deg);
}

#surpresa .heartBox::before,
#surpresa .heartBox::after {
  content: "";
  width: 260px;
  height: 230px;
  background: #ff4d88;
  border-radius: 50%;
  position: absolute;
}

#surpresa .heartBox::before { top: -130px; }
#surpresa .heartBox::after { left: 130px; }

#surpresa .msg {
  position: absolute;
  inset: 0;
  transform: rotate(45deg);
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-weight: bold;
  padding: 20px;
}
</style>
</head>

<body>

<div id="splash"><span>üíñ</span></div>

<div class="card">
  <h1>Amorzinhos üíñ</h1>
  <div id="heart">‚ù§Ô∏è</div>
  <p>Estamos juntos h√°:</p>
  <div id="contador">...</div>
  <button onclick="toggleMusica()">üéµ Tocar m√∫sica</button>
</div>

<audio id="musica" src="https://growing-tan-f0hzfedqrl.edgeone.app/aliancas.mp3" loop></audio>

<div id="surpresa">
  <div class="heartBox">
    <div class="msg" id="msgSurpresa"></div>
  </div>
</div>

<script>
/* SPLASH */
setTimeout(()=>document.getElementById("splash").style.display="none",2000);

/* CONTADOR */
const inicio = new Date("2025-09-25T00:00:00");
const contador = document.getElementById("contador");

function atualizar() {
  const diff = new Date() - inicio;
  const d = Math.floor(diff / 86400000);
  const h = Math.floor(diff / 3600000 % 24);
  const m = Math.floor(diff / 60000 % 60);
  contador.innerText = `${d} dias, ${h}h ${m}m`;
}
setInterval(atualizar,1000);
atualizar();

/* AUDIO + BATIDA */
const musica = document.getElementById("musica");
const heart = document.getElementById("heart");
let ctx, analyser, data;

function toggleMusica() {
  if (!ctx) {
    ctx = new (window.AudioContext||webkitAudioContext)();
    analyser = ctx.createAnalyser();
    analyser.fftSize = 256;
    const src = ctx.createMediaElementSource(musica);
    src.connect(analyser);
    analyser.connect(ctx.destination);
    data = new Uint8Array(analyser.frequencyBinCount);
    animate();
  }

  musica.paused ? musica.play() : musica.pause();
}

function animate() {
  analyser.getByteFrequencyData(data);
  const avg = data.reduce((a,b)=>a+b)/data.length;

  const scale = 1 + avg/120;
  heart.style.transform = `scale(${scale})`;
  heart.style.filter = `hue-rotate(${avg*3}deg) drop-shadow(0 0 20px pink)`;

  if (avg > 120 && navigator.vibrate) navigator.vibrate(40);

  if (avg > 100) createParticle();

  requestAnimationFrame(animate);
}

function createParticle() {
  const p = document.createElement("div");
  p.className = "particle";
  p.innerText = "‚ú®";
  p.style.left = Math.random()*100+"vw";
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),3000);
}

/* DIA 25 */
const hoje = new Date();
if (hoje.getDate() === 25) {
  const dias = Math.floor((hoje - inicio)/86400000);
  document.getElementById("msgSurpresa").innerText =
    `Estamos h√° ${dias} dias escrevendo a hist√≥ria do nosso amor üíñ`;
  document.getElementById("surpresa").style.display = "flex";
}

/* PWA */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
